<!DOCTYPE html>
<html>
<head>
	<title>Snake Game</title>
	<link rel="stylesheet" type="text/css" href="style.css?5">
	<script type="text/javascript" src="drawing.js?5"></script>
	<script type="text/javascript" src="game.js?5"></script>
	<script type="text/javascript" src="snake.js?5"></script>
</head>
<body>

<canvas id="mycanvas" width="640" height="480">
	
</canvas>


<script type="text/javascript">
"use strict";
(function () {
	var game = new SnakeGame(new window.Drawing('mycanvas'));
	var snake = new SnakeGame.Snake(game, 100, 100);
	var food = {x: 0, y: 0};

	game.logic = function () {

		if (snake.eat(food)) {
			spawnNewFood();
		}

		snake.death();
		snake.update();
		snake.draw();

		drawFood();
	};

	game.addKeydown(function (event) {
		const UP = 38;
		const DOWN = 40;
		const LEFT = 37;
		const RIGHT = 39;

		var keyCode = event.keyCode;
		if (keyCode == UP) {
			snake.dir(0, -1);
		} else if (keyCode == DOWN) {
			snake.dir(0, 1);
		} else if (keyCode == RIGHT) {
			snake.dir(1, 0);
		} else if (keyCode == LEFT) {
			snake.dir(-1, 0);
		}
	});

	spawnNewFood();

	game.start();

	function spawnNewFood() {
		var cols = game.width / game.scl;
		var rows = game.height / game.scl;
		food.x = getRandomInt(0, cols) * game.scl;
		food.y = getRandomInt(0, rows) * game.scl;
	}
	function drawFood() {
		game.drawing.rect(food.x, food.y, game.scl, game.scl, 'green');
	}

	function getRandomInt(min, max)
	{
	  return Math.floor(Math.random() * (max - min + 1)) + min;
	}


})();
</script>
</body>
</html>
